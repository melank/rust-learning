Codex 指示ファイル（AGENTS.md）

【このリポジトリの目的】
このリポジトリは Rust 学習用のモノレポです。
Cargo workspace を用いて、複数の学習用 crate と 1 つのプロジェクトを管理します。

原則として、このリポジトリは 1 つの Git リポジトリのまま運用してください。
分割が必要な場合は、必ず事前に理由を説明し、確認を取ってください。

────────────────────────────────

【リポジトリ構成（必ず守ること）】

/
├─ crates/
│  ├─ w01_basics/
│  ├─ w02_ownership/
│  ├─ w03_error_handling/
│  ├─ w04_traits/
│  ├─ w05_iterators/
│  └─ （必要に応じて追加）
│
├─ projects/
│  └─ cli_tool/
│
├─ docs/
│  ├─ notes/      （週ごとの学習メモ）
│  └─ design/     （設計メモ・考察）
│
├─ .github/workflows/
│  └─ ci.yml
│
├─ Cargo.toml     （workspace 定義）
└─ README.md

・crates 以下は週ごとの学習課題用 crate
・projects/cli_tool は後半で育てるメインプロジェクト
・再利用可能なロジックは、必要になった時点で crates に library crate として切り出す

────────────────────────────────

【Cargo workspace のルール】

・ルートの Cargo.toml に workspace を定義すること
・members は crates/* と projects/* を含める
・各 crate は単体で cargo test が通る状態を保つ
・学習目的の crate 同士を密結合させない

────────────────────────────────

【Git 運用ルール】

（コミット方針）
・小さく、意味のある単位でコミットする
・学習目的のため、コンパイルエラーが出る状態のコミットも許可する
・ただし、次のコミットで必ず修正すること

（コミットメッセージ例）
・w02: E0502 を再現するコードを追加
・w02: スコープ分割で borrow エラーを修正
・docs: ライフタイム省略規則のメモを追加
・ci: clippy と fmt を追加

────────────────────────────────

【CI（必須）】

GitHub Actions で以下を必ず実行すること。

・cargo fmt --check
・cargo clippy -- -D warnings
・cargo test

main ブランチでは CI が通る状態を維持すること。

────────────────────────────────

【作業手順のルール】

Codex は以下の流れで作業すること。

1. 既存のリポジトリ構造・ルールを確認する
2. 指示された作業を最小限の変更で実装する
3. cargo fmt / cargo clippy / cargo test を実行する
4. 実行結果を報告する
5. 変更点の要約（diff の概要）を説明する

────────────────────────────────

【禁止事項】

・事前確認なしにディレクトリ構成を変更しない
・不要なフレームワークや依存関係を追加しない
・学習目的を逸脱する最適化・過剰な抽象化をしない
・既存コードの意図を無視して書き換えない

